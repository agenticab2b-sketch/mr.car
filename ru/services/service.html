<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" id="metaDescription"
        content="Услуги автосервиса Mr.Car в Таллинне — профессиональный ремонт и обслуживание автомобилей.">
    <title id="pageTitle">Услуга — Mr.Car Автосервис Таллинн</title>

    <!-- Fix 1: Canonical -->
    <link rel="canonical" id="canonicalLink" href="">
    <link rel="alternate" hreflang="ru" id="hreflangRu" href="">
    <link rel="alternate" hreflang="et" id="hreflangEt" href="">
    <link rel="alternate" hreflang="en" id="hreflangEn" href="">
    <link rel="alternate" hreflang="x-default" id="hreflangDefault" href="">

    <!-- Fix 4: Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:title" id="ogTitle" content="">
    <meta property="og:description" id="ogDesc" content="">
    <meta property="og:image" id="ogImage" content="">
    <meta property="og:url" id="ogUrl" content="">
    <!-- Fix 4: Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" id="twTitle" content="">
    <meta name="twitter:description" id="twDesc" content="">
    <meta name="twitter:image" id="twImage" content="">

    <!-- Fix 5: JSON-LD -->
    <script type="application/ld+json" id="ldJson"></script>

    <link rel="stylesheet" href="../../style.css">
    <script src="https://code.iconify.design/iconify-icon/2.1.0/iconify-icon.min.js"></script>
    <script src="services-data.js"></script>
</head>

<body>

    <!-- NAVBAR -->
    <header class="navbar" id="navbar">
        <a href="/ru/" class="navbar__logo">Mr.Car</a>
        <nav class="navbar__nav">
            <div class="navbar__item has-dropdown">
                <a href="/ru/#services" class="navbar__link" style="color:var(--accent-primary)">[01] Услуги</a>
                <!-- Fix 6: JS-generated mega-menu -->
                <div class="mega-menu" id="megaMenuDesktop"></div>
            </div>
            <a href="/ru/#about" class="navbar__link">[02] О нас</a>
            <a href="/ru/#pricing" class="navbar__link">[03] Цены</a>
            <a href="/ru/#contact" class="navbar__link">[04] Контакты</a>
        </nav>
        <a href="tel:+37256461210" class="navbar__phone">+372 5646 1210</a>
        <div class="navbar__cta">
            <a href="#request" class="btn btn-primary">Записаться</a>
        </div>
        <button class="navbar__burger" id="burgerBtn" aria-label="Open menu">
            <span></span><span></span><span></span>
        </button>
        <div class="navbar__lang desktop-only">
            <a href="/" class="lang-link" title="Eesti keel">
                <iconify-icon icon="circle-flags:ee" width="24" height="24"></iconify-icon>
            </a>
            <a href="/ru/" class="lang-link active" title="Русский">
                <iconify-icon icon="circle-flags:ru" width="24" height="24"></iconify-icon>
            </a>
            <a href="/en/" class="lang-link" title="English">
                <iconify-icon icon="circle-flags:en" width="24" height="24"></iconify-icon>
            </a>
        </div>
    </header>

    <!-- MOBILE MENU -->
    <div class="mobile-menu" id="mobileMenu">
        <button class="mobile-menu__close" id="closeMenu" aria-label="Close menu">&times;</button>
        <nav aria-label="Мобильная навигация">
            <a href="/ru/#services" class="mobile-menu__link" onclick="toggleMobileMegaMenu(event)">
                Услуги
                <iconify-icon icon="mdi:chevron-down" class="mobile-menu__toggle-icon" width="24"
                    height="24"></iconify-icon>
            </a>
            <!-- Fix 6: JS-generated mobile mega-menu -->
            <div class="mobile-mega-menu" id="mobileMegaMenu"></div>
            <a href="/ru/#about" class="mobile-menu__link" onclick="closeMobileMenu()">О нас</a>
            <a href="/ru/#pricing" class="mobile-menu__link" onclick="closeMobileMenu()">Цены</a>
            <a href="/ru/#contact" class="mobile-menu__link" onclick="closeMobileMenu()">Контакты</a>
        </nav>
        <a href="tel:+37256461210" class="mobile-menu__link" style="color:var(--accent-primary)">+372 5646 1210</a>
        <div class="mobile-menu__lang">
            <a href="/" class="mobile-lang-link">
                <iconify-icon icon="circle-flags:ee" width="32" height="32"></iconify-icon>
                <span>Eesti</span>
            </a>
            <a href="/ru/" class="mobile-lang-link active">
                <iconify-icon icon="circle-flags:ru" width="32" height="32"></iconify-icon>
                <span>Русский</span>
            </a>
            <a href="/en/" class="mobile-lang-link">
                <iconify-icon icon="circle-flags:en" width="32" height="32"></iconify-icon>
                <span>English</span>
            </a>
        </div>
    </div>

    <!-- ████ A) HERO ████ -->
    <section class="sd-hero" id="sdHero">
        <div class="sd-hero__overlay"></div>
        <div class="sd-hero__content site-container">
            <span class="sd-hero__meta">/// Mr.Car Автосервис</span>
            <h1 class="sd-hero__title" id="heroTitle">Услуги автосервиса Mr.Car</h1>
            <p class="sd-hero__lead" id="heroLead"></p>
            <a href="#request" class="btn btn-primary sd-hero__cta">Отправить запрос <span class="arrow">↗</span></a>
        </div>
    </section>

    <!-- ████ MOBILE SIDEBAR (shown only on mobile, above content) ████ -->
    <div class="sd-sidebar-mobile site-container" id="sidebarMobile">
        <button class="sd-sidebar-mobile__toggle" id="sidebarToggle" aria-expanded="false">
            <span>Выбрать услугу</span>
            <iconify-icon icon="mdi:chevron-down" width="24" height="24"></iconify-icon>
        </button>
        <div class="sd-sidebar-mobile__content" id="sidebarMobileContent">
            <!-- JS fills this -->
        </div>
    </div>

    <!-- ████ B) MAIN CONTENT (2 columns) ████ -->
    <section class="sd-main site-container">
        <!-- LEFT COLUMN: Content -->
        <article class="sd-content">
            <!-- Intro -->
            <div class="sd-intro">
                <h2 class="sd-intro__title" id="introTitle"></h2>
                <div class="sd-intro__text" id="introText"></div>
            </div>

            <!-- Symptoms Grid -->
            <div class="sd-symptoms">
                <h3 class="sd-symptoms__title" id="symptomsTitle"></h3>
                <div class="sd-symptoms__grid" id="symptomsGrid">
                    <!-- JS fills -->
                </div>
                <p class="sd-symptoms__after" id="afterSymptoms"></p>
            </div>

            <!-- Services List -->
            <div class="sd-services-list">
                <h3 class="sd-services-list__title" id="servicesListTitle"></h3>
                <ul class="sd-services-list__items" id="servicesList">
                    <!-- JS fills -->
                </ul>
                <p class="sd-services-list__after" id="afterList"></p>
            </div>

            <!-- Promo Banner (optional) -->
            <div class="sd-promo" id="promoBanner" style="display:none;">
                <div class="sd-promo__content">
                    <iconify-icon icon="mdi:tag-outline" width="28" height="28"></iconify-icon>
                    <p class="sd-promo__text" id="promoText"></p>
                </div>
            </div>
        </article>

        <!-- RIGHT COLUMN: Sidebar Navigation -->
        <aside class="sd-sidebar" id="sidebarDesktop">
            <!-- JS fills sidebar categories -->
        </aside>
    </section>

    <!-- ████ C) CTA + FORM SECTION ████ -->
    <section class="sd-cta" id="request">
        <div class="sd-cta__overlay"></div>
        <div class="sd-cta__inner site-container">
            <!-- Left: CTA Text -->
            <div class="sd-cta__info">
                <h2 class="sd-cta__title" id="ctaTitle"></h2>
                <p class="sd-cta__text" id="ctaText"></p>
                <a href="" class="sd-cta__phone" id="ctaPhone">
                    <iconify-icon icon="mdi:phone" width="24" height="24"></iconify-icon>
                    <span id="ctaPhoneText"></span>
                </a>
            </div>
            <!-- Right: Form -->
            <div class="sd-cta__form-wrap">
                <div class="sd-cta__form-header">
                    <h3 id="formTitle"></h3>
                    <p id="formSubtitle"></p>
                </div>
                <form id="serviceForm">
                    <div class="form-group">
                        <label for="sd-name">Имя</label>
                        <input type="text" id="sd-name" name="name" placeholder="Как вас зовут" required>
                    </div>
                    <div class="form-group">
                        <label for="sd-phone">Телефон</label>
                        <input type="tel" id="sd-phone" name="phone" placeholder="+372 ..." required>
                    </div>
                    <div class="form-group">
                        <label for="sd-message">Сообщение (необязательно)</label>
                        <textarea id="sd-message" name="message"
                            placeholder="Опишите проблему или вид работ"></textarea>
                    </div>
                    <button type="submit" class="btn btn-primary" style="width:100%; justify-content:center;">
                        Отправить заявку <span class="arrow">↗</span>
                    </button>
                </form>
            </div>
        </div>
    </section>

    <!-- ████ D) MAP ████ -->
    <section class="sd-map">
        <iframe
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2028.5!2d24.7!3d59.45!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zNTnCsDI3JzAwLjAiTiAyNMKwNDInMDAuMCJF!5e0!3m2!1sen!2see!4v1&q=Kopli+82a,+Tallinn"
            allowfullscreen loading="lazy" title="Mr.Car на карте"
            style="width:100%; height:400px; border:none; filter: grayscale(0.8) contrast(1.1);"></iframe>
    </section>

    <!-- ████ E) FOOTER ████ -->
    <footer class="footer">
        <div class="footer-grid site-container">
            <div>
                <div class="footer__col-title">Контакты</div>
                <div class="footer__text">
                    <a href="tel:+37256461210">+372 5646 1210</a><br>
                    <a href="mailto:info@mrcar.ee">info@mrcar.ee</a><br>
                    Kopli 82a, 10412 Tallinn
                </div>
                <div class="footer__socials">
                    <a href="#" class="footer__social-link" aria-label="Facebook">
                        <iconify-icon icon="mdi:facebook"></iconify-icon>
                    </a>
                    <a href="#" class="footer__social-link" aria-label="Instagram">
                        <iconify-icon icon="mdi:instagram"></iconify-icon>
                    </a>
                </div>
            </div>
            <div>
                <div class="footer__col-title">Реквизиты</div>
                <div class="footer__text"
                    style="font-family: var(--font-mono); font-size: 0.75rem; color: var(--text-dimmed);">
                    ANET EESTI OÜ<br>
                    Reg. nr: 10233521<br>
                    KMKR: EE100321511<br>
                    LHV: EE54 7700 7710 0969 0559<br>
                    SEB: EE10 1010 0520 0108 4005
                </div>
            </div>
            <div>
                <div class="footer__col-title">Часы работы</div>
                <div class="footer__text">
                    Понедельник – Пятница<br>
                    <strong style="color: var(--text-main);">09:00 – 18:00</strong><br><br>
                    Суббота – Воскресенье<br>
                    <span style="color: var(--text-dimmed);">Закрыто</span>
                </div>
            </div>
        </div>
        <div class="footer__bottom">
            <span>© 2025 Mr.Car Autoremont Tallinn</span>
            <a href="#">Privaatsuspoliitika</a>
            <span>Designed by <a href="https://agentica.ee" target="_blank" rel="noopener">Agentica</a></span>
        </div>
    </footer>

    <!-- Snackbar -->
    <div id="snackbar" class="snackbar">Заявка отправлена успешно!</div>

    <!-- ████ SCRIPTS ████ -->
    <script>
        // ── Constants ──
        // SEO: Canonical/OG/JSON-LD must always point to production domain
        var SITE_ORIGIN = 'https://mrcar.ee';
        var DEFAULT_OG_IMAGE = 'https://images.unsplash.com/photo-1619642751034-765dfdf7c58e?w=1200&q=80';

        // ── Category labels (RU) ──
        // Point 6: Mapping raw keys to RU labels
        var CATEGORY_LABELS = {
            'Диагностика и электрика': 'Диагностика и электрика',
            'Двигатель и агрегаты': 'Двигатель и агрегаты',
            'Ходовая и тормоза': 'Ходовая и тормоза',
            'Обслуживание': 'Обслуживание',
            'Климат и доп. оборудование': 'Климат и доп. оборудование'
        };

        // ── Point 3: Ensure absolute image URL ──
        function toAbsoluteImageUrl(src) {
            if (!src) return DEFAULT_OG_IMAGE;
            if (src.indexOf('http') === 0) return src;
            // Remove leading slash if any, then join with origin
            var cleanSrc = src.charAt(0) === '/' ? src.substring(1) : src;
            return SITE_ORIGIN + '/' + cleanSrc;
        }

        // ── Get slug from URL ──
        function getSlug() {
            var params = new URLSearchParams(window.location.search);
            if (params.get('slug')) return params.get('slug');
            var path = window.location.pathname;
            var parts = path.split('/').filter(Boolean);
            // Check for /ru/services/{slug}
            if (parts.length >= 3 && parts[1] === 'services') {
                return parts[2].replace('.html', '');
            }
            return null;
        }

        // ── Find service by slug ──
        function getService(slug) {
            return SERVICES.find(function (s) { return s.slug === slug; });
        }

        // ── Fix 6: Build nav menus from SERVICES data ──
        function buildNavMenus() {
            // Desktop mega-menu
            const desktopMenu = document.getElementById('megaMenuDesktop');
            if (desktopMenu) {
                desktopMenu.innerHTML = '';
                SERVICES.forEach(s => {
                    const a = document.createElement('a');
                    a.href = '/ru/services/' + s.slug;
                    a.className = 'mega-menu__item';
                    a.innerHTML = '<iconify-icon icon="' + s.icon + '" width="20" height="20" aria-hidden="true"></iconify-icon><span>' + s.navTitle + '</span>';
                    desktopMenu.appendChild(a);
                });
            }

            // Mobile mega-menu
            const mobileMenu = document.getElementById('mobileMegaMenu');
            if (mobileMenu) {
                mobileMenu.innerHTML = '';
                SERVICES.forEach(s => {
                    const a = document.createElement('a');
                    a.href = '/ru/services/' + s.slug;
                    a.className = 'mobile-mega-menu__item';
                    a.addEventListener('click', function () { closeMobileMenu(); });
                    a.innerHTML = '<iconify-icon icon="' + s.icon + '" aria-hidden="true"></iconify-icon><span>' + s.navTitle + '</span>';
                    mobileMenu.appendChild(a);
                });
            }
        }

        // ── Build sidebar navigation ──
        function buildSidebar(currentSlug) {
            var categories = {};
            SERVICES.forEach(function (s) {
                if (!categories[s.category]) categories[s.category] = [];
                categories[s.category].push(s);
            });

            var html = '';
            var catKeys = Object.keys(categories);
            for (var i = 0; i < catKeys.length; i++) {
                var cat = catKeys[i];
                var services = categories[cat];
                var label = CATEGORY_LABELS[cat] || cat;
                html += '<div class="sd-sidebar__category">' +
                    '<div class="sd-sidebar__cat-title">' + label + '</div>' +
                    '<ul class="sd-sidebar__list">';
                services.forEach(function (s) {
                    var active = s.slug === currentSlug ? ' active' : '';
                    html += '<li><a href="/ru/services/' + s.slug + '" class="sd-sidebar__link' + active + '">' +
                        '<iconify-icon icon="' + s.icon + '" width="18" height="18" aria-hidden="true"></iconify-icon>' +
                        '<span>' + s.navTitle + '</span>' +
                        '</a></li>';
                });
                html += '</ul></div>';
            }
            return html;
        }

        // ── Render page ──
        function renderService() {
            const slug = getSlug();
            if (!slug) {
                window.location.href = '/ru/';
                return;
            }

            const s = getService(slug);
            if (!s) {
                window.location.href = '/ru/';
                return;
            }

            // ── Canonical URL + replaceState ──
            var canonicalUrl = SITE_ORIGIN + '/ru/services/' + slug;
            document.getElementById('canonicalLink').href = canonicalUrl;

            // hreflang
            document.getElementById('hreflangRu').href = SITE_ORIGIN + '/ru/services/' + s.allSlugs.ru;
            document.getElementById('hreflangEt').href = SITE_ORIGIN + '/ee/services/' + s.allSlugs.ee;
            document.getElementById('hreflangEn').href = SITE_ORIGIN + '/en/services/' + s.allSlugs.en;
            document.getElementById('hreflangDefault').href = SITE_ORIGIN + '/en/services/' + s.allSlugs.en;

            // Update URL to clean /ru/services/slug without reload
            if (window.location.search.indexOf('slug=') !== -1 || window.location.pathname.indexOf('service.html') !== -1) {
                history.replaceState(null, '', '/ru/services/' + slug);
            }

            // ── Fallback title / description ──
            var seoTitle = (s.seo && s.seo.title)
                ? s.seo.title
                : s.heroTitle + ' — Mr.Car, Таллинн';

            // Point 7: Fallback meta description 140-160 chars
            var seoDesc = (s.seo && s.seo.description)
                ? s.seo.description
                : s.heroTitle + ' в автосервисе Mr.Car (Таллинн). Профессиональный ремонт, гарантия качества и честные цены на Kopli 82a. Записывайтесь: +372 5646 1210!';

            // SEO
            document.getElementById('pageTitle').textContent = seoTitle;
            document.getElementById('metaDescription').setAttribute('content', seoDesc);

            // ── OG + Twitter meta (absolute image URLs) ──
            var absImage = toAbsoluteImageUrl(s.heroImage);
            document.getElementById('ogTitle').setAttribute('content', seoTitle);
            document.getElementById('ogDesc').setAttribute('content', seoDesc);
            document.getElementById('ogImage').setAttribute('content', absImage);
            document.getElementById('ogUrl').setAttribute('content', canonicalUrl);
            document.getElementById('twTitle').setAttribute('content', seoTitle);
            document.getElementById('twDesc').setAttribute('content', seoDesc);
            document.getElementById('twImage').setAttribute('content', absImage);

            // ── Point 4: JSON-LD structured data (clean phone and structure) ──
            var ldJson = {
                "@context": "https://schema.org",
                "@graph": [
                    {
                        "@type": "AutoRepair",
                        "name": "Mr.Car Autoremont",
                        "url": SITE_ORIGIN + '/ru/',
                        "telephone": "+372 5646 1210",
                        "image": toAbsoluteImageUrl('/homepage_pics/lowkey_portfolio_1_1771547397632.avif'),
                        "address": {
                            "@type": "PostalAddress",
                            "streetAddress": "Kopli 82a",
                            "addressLocality": "Tallinn",
                            "postalCode": "10412",
                            "addressCountry": "EE"
                        },
                        "openingHoursSpecification": {
                            "@type": "OpeningHoursSpecification",
                            "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
                            "opens": "09:00",
                            "closes": "18:00"
                        }
                    },
                    {
                        "@type": "Service",
                        "name": s.heroTitle,
                        "provider": {
                            "@type": "LocalBusiness",
                            "name": "Mr.Car Autoremont",
                            "telephone": "+372 5646 1210",
                            "address": {
                                "@type": "PostalAddress",
                                "streetAddress": "Kopli 82a",
                                "addressLocality": "Tallinn"
                            }
                        },
                        "url": canonicalUrl,
                        "description": seoDesc,
                        "areaServed": { "@type": "City", "name": "Tallinn" }
                    }
                ]
            };
            document.getElementById('ldJson').textContent = JSON.stringify(ldJson);

            // Hero
            // Point 1: Overwrite H1
            document.getElementById('sdHero').style.backgroundImage = "url('" + s.heroImage + "')";
            document.getElementById('heroTitle').textContent = s.heroTitle;
            document.getElementById('heroLead').textContent = s.heroLead;

            // ── Fix 7: Safe DOM insertion for intro ──
            document.getElementById('introTitle').textContent = s.introTitle;
            var introEl = document.getElementById('introText');
            introEl.innerHTML = '';
            s.introText.forEach(function (text) {
                var p = document.createElement('p');
                p.textContent = text;
                introEl.appendChild(p);
            });

            // ── Fix 7: Safe DOM insertion for symptoms ──
            document.getElementById('symptomsTitle').textContent = s.symptomsTitle;
            var grid = document.getElementById('symptomsGrid');
            grid.innerHTML = '';
            s.symptoms.forEach(function (sym) {
                var div = document.createElement('div');
                div.className = 'sd-symptom';
                var iconDiv = document.createElement('div');
                iconDiv.className = 'sd-symptom__icon';
                iconDiv.innerHTML = '<iconify-icon icon="' + sym.icon + '" width="28" height="28"></iconify-icon>';
                var span = document.createElement('span');
                span.className = 'sd-symptom__text';
                span.textContent = sym.text;
                div.appendChild(iconDiv);
                div.appendChild(span);
                grid.appendChild(div);
            });
            document.getElementById('afterSymptoms').textContent = s.afterSymptomsText;

            // ── Fix 7: Safe DOM insertion for services list ──
            document.getElementById('servicesListTitle').textContent = s.servicesListTitle;
            var listEl = document.getElementById('servicesList');
            listEl.innerHTML = '';
            s.servicesList.forEach(function (item) {
                var li = document.createElement('li');
                li.innerHTML = '<iconify-icon icon="mdi:check" width="18" height="18" aria-hidden="true"></iconify-icon>';
                var span = document.createElement('span');
                span.textContent = item;
                li.appendChild(span);
                listEl.appendChild(li);
            });
            document.getElementById('afterList').textContent = s.afterListText;

            // Promo Banner
            if (s.promoBanner && s.promoBanner.enabled) {
                document.getElementById('promoBanner').style.display = '';
                document.getElementById('promoText').textContent = s.promoBanner.text;
            }

            // CTA Section
            document.getElementById('ctaTitle').textContent = s.ctaSection.title;
            document.getElementById('ctaText').textContent = s.ctaSection.text;
            document.getElementById('ctaPhoneText').textContent = s.ctaSection.phoneText;
            document.getElementById('ctaPhone').href = 'tel:' + s.ctaSection.phoneNumber;

            // Form
            document.getElementById('formTitle').textContent = s.form.title;
            document.getElementById('formSubtitle').textContent = s.form.subtitle;

            // Sidebar (desktop)
            document.getElementById('sidebarDesktop').innerHTML = buildSidebar(slug);

            // Sidebar (mobile)
            document.getElementById('sidebarMobileContent').innerHTML = buildSidebar(slug);

            // ── Fix 6: Build nav menus from data ──
            buildNavMenus();
        }

        // ── Mobile sidebar toggle ──
        document.getElementById('sidebarToggle').addEventListener('click', function () {
            var content = document.getElementById('sidebarMobileContent');
            var expanded = this.getAttribute('aria-expanded') === 'true';
            this.setAttribute('aria-expanded', !expanded);
            content.classList.toggle('is-open');
            this.classList.toggle('is-open');
        });

        // ── Mobile menu ──
        var burger = document.getElementById('burgerBtn');
        var mobileMenu = document.getElementById('mobileMenu');
        var closeBtn = document.getElementById('closeMenu');

        burger.addEventListener('click', function () {
            mobileMenu.classList.add('active');
            document.body.style.overflow = 'hidden';
        });

        closeBtn.addEventListener('click', closeMobileMenu);

        document.addEventListener('keydown', function (e) {
            if (e.key === 'Escape' && mobileMenu.classList.contains('active')) {
                closeMobileMenu();
                burger.focus();
            }
        });

        function closeMobileMenu() {
            mobileMenu.classList.remove('active');
            document.body.style.overflow = '';
            var megaMenu = document.getElementById('mobileMegaMenu');
            var toggleLink = document.querySelector('.mobile-menu__link[onclick="toggleMobileMegaMenu(event)"]');
            if (megaMenu) megaMenu.classList.remove('is-open');
            if (toggleLink) toggleLink.classList.remove('is-open');
        }

        function toggleMobileMegaMenu(e) {
            e.preventDefault();
            var megaMenu = document.getElementById('mobileMegaMenu');
            var toggleLink = e.currentTarget;
            megaMenu.classList.toggle('is-open');
            toggleLink.classList.toggle('is-open');
        }

        // ── Navbar scroll ──
        var navbar = document.getElementById('navbar');
        window.addEventListener('scroll', function () {
            navbar.style.borderBottomColor = window.scrollY > 100 ? 'var(--accent-primary)' : '';
        });

        // ── Form handling ──
        var serviceForm = document.getElementById('serviceForm');
        if (serviceForm) {
            serviceForm.addEventListener('submit', function (e) {
                e.preventDefault();
                var btn = this.querySelector('button[type="submit"]');
                var orig = btn.innerHTML;
                btn.disabled = true;
                btn.innerHTML = 'Отправка...';
                setTimeout(function () {
                    var sb = document.getElementById('snackbar');
                    sb.className = 'snackbar show';
                    setTimeout(function () { sb.className = sb.className.replace('show', ''); }, 3000);
                    serviceForm.reset();
                    btn.disabled = false;
                    btn.innerHTML = orig;
                }, 1000);
            });
        }

        // ── Init ──
        renderService();
    </script>

</body>

</html>